<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studi Kasus & Kuis Interaktif: Trauma Telinga</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #334155; }
        .nav-button-active { background-color: #047857; color: #ffffff; font-weight: 600; }
        .nav-button-inactive { background-color: #ecfdf5; color: #064e3b; border: 1px solid #d1fae5; }
        .option-btn { transition: background-color 0.3s, border-color 0.3s, color 0.3s; cursor: pointer; }
        .option-btn:hover:not([disabled]) { background-color: #d1fae5; border-color: #10b981; }
        .option-btn.correct { background-color: #34d399; color: white; border-color: #10b981; }
        .option-btn.incorrect { background-color: #f87171; color: white; border-color: #ef4444; }
        .option-btn:disabled { cursor: not-allowed; }
        .less-time { color: #ef4444; font-weight: 700; }
        #conclusion.hidden { opacity: 0; transform: translateY(20px); }
        #progress-section { display: flex; flex-direction: column; align-items: center; gap: 1rem; }
        .battery { width: 200px; height: 40px; border: 3px solid #4b5563; border-radius: 8px; padding: 4px; display: flex; gap: 4px; position: relative; background-color: #f1f5f9; }
        .battery::after { content: ''; position: absolute; right: -12px; top: 50%; transform: translateY(-50%); height: 50%; width: 8px; background-color: #4b5563; border-radius: 0 3px 3px 0; }
        .battery-segment { flex: 1; border-radius: 3px; background-color: #cbd5e1; transition: background-color 0.5s ease; }
        .battery-segment.filled { background-color: #86efac; }
        #summary-percentage { font-size: 1.125rem; font-weight: 700; color: #1e293b; }
        #diagnosis-checklist { list-style: none; padding: 0; width: 100%; max-width: 320px; font-size: 0.875rem; color: #475569; }
        #diagnosis-checklist li { padding: 4px 0; opacity: 0.6; transition: opacity 0.4s; }
        #diagnosis-checklist li.completed { opacity: 1; font-weight: 500; color: #334155; }
        #start-quiz-btn:disabled { background-color: #94a3b8; cursor: not-allowed; opacity: 0.7; box-shadow: none; }
        @keyframes electric-sparkle { 0%, 100% { box-shadow: 0 0 5px #a7f3d0, 0 0 10px #6ee7b7, 0 0 15px #34d399, 0 0 20px #10b981; } 50% { box-shadow: 0 0 10px #a7f3d0, 0 0 20px #6ee7b7, 0 0 30px #34d399, 0 0 40px #10b981; } }
        .electric-effect { animation: electric-sparkle 1.5s infinite linear; border: 1px solid #a7f3d0; }
    </style>
</head>
<body class="bg-slate-50 text-slate-700">

    <main class="container mx-auto p-4 sm:p-6 md:p-8 max-w-5xl">

        <nav class="flex justify-between items-center mb-8"><a href="#" class="inline-flex items-center text-emerald-700 hover:text-emerald-900 font-semibold transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg> Kembali ke Daftar Kasus</a><a href="index.html" class="inline-flex items-center text-sm text-slate-500 hover:text-emerald-700 font-medium transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg> Halaman Utama</a></nav>
        
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-emerald-800">Menganalisis Kasus Trauma Telinga</h1>
        </header>

        <section id="case-summary" class="mb-12 bg-white p-6 rounded-xl shadow-lg border border-slate-200">
            <h2 class="text-2xl font-semibold text-emerald-700 mb-4">Ringkasan Kasus</h2>
            <div class="grid md:grid-cols-3 gap-4 text-center">
                <div class="bg-emerald-50 p-4 rounded-lg border border-emerald-100"><p class="text-sm text-emerald-800 font-medium">Pasien</p><p class="text-xl font-bold text-emerald-900">Laki-laki, 30 Tahun</p></div>
                <div class="bg-emerald-50 p-4 rounded-lg border border-emerald-100"><p class="text-sm text-emerald-800 font-medium">Penyebab</p><p class="text-xl font-bold text-emerald-900">Kecelakaan Lalu Lintas</p></div>
                <div class="bg-emerald-50 p-4 rounded-lg border border-emerald-100"><p class="text-sm text-emerald-800 font-medium">Keluhan Utama</p><p class="text-xl font-bold text-emerald-900">Darah dari Telinga Kanan</p></div>
            </div>
            <div class="mt-6">
                <div class="bg-slate-100 p-4 rounded-lg">
                    <h3 class="font-semibold text-slate-800">Temuan Kunci Pemeriksaan Fisik:</h3>
                    <ul class="list-disc list-inside text-slate-600 mt-2 space-y-1">
                        <li>Kesadaran: Kompos mentis, Tanda Vital: Normal.</li>
                        <li>Telinga Kanan: <b>Perdarahan aktif</b> dari liang telinga.</li>
                        <li>Daun Telinga: Terdapat luka robek.</li>
                        <li>Otoskopi: Setelah dibersihkan, tampak <b>robekan pada membran timpani</b>.</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <section id="differential-diagnosis" class="mb-12">
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-slate-200">
                <h2 class="text-2xl font-semibold text-emerald-700 mb-2 text-center">Analisis Prinsip Penatalaksanaan</h2>
                <p class="text-center text-slate-600 mb-6">Klik setiap pernyataan untuk menganalisis kebenarannya dalam konteks kasus ini.</p>
                <nav id="diagnosis-nav" class="flex flex-wrap justify-center gap-2 mb-8"></nav>
                <div id="diagnosis-details" class="transition-[height] duration-500 ease-in-out overflow-hidden h-0"></div>
            </div>
        </section>

        <section id="conclusion" class="hidden bg-red-50 border-2 border-red-400 rounded-xl p-6 shadow-lg mt-12 transition-all duration-700 ease-in-out">
            <h2 class="text-2xl font-bold text-red-800 mb-4 text-center md:text-left">Kesimpulan & Pengecualian</h2>
            <div class="text-center md:text-left">
                <p class="text-3xl font-bold text-red-900">Penanganan Perdarahan Adalah Prioritas</p>
                <p class="mt-2 text-red-700">Pernyataan bahwa "tidak perlu memasang tampon segera" adalah **prinsip yang tidak tepat** dalam kasus ini. Adanya **perdarahan aktif** menjadikan tindakan hemostasis (menghentikan perdarahan) sebagai prioritas. Pemasangan tampon steril mungkin diperlukan. Prinsip penatalaksanaan lainnya (mewaspadai tuli konduktif, edukasi, menghindari obat ototoksik, dan observasi sebelum operasi) adalah benar.</p>
            </div>
             <div class="flex justify-end mt-6">
                <div class="bg-slate-200 text-slate-700 text-xs font-bold px-3 py-1.5 rounded-full flex items-center space-x-2 flex-shrink-0">
                    <span>Level Kompetensi SKDI 2022:</span>
                    <span class="bg-white text-emerald-800 font-bold px-2 py-0.5 rounded-md">3A</span>
                </div>
            </div>
        </section>


        <hr class="my-16 border-slate-300">

        <section id="quiz-section" class="flex items-center justify-center"><div class="bg-white w-full max-w-3xl rounded-xl shadow-2xl p-6 md:p-8">
            <div id="quiz-home-box" class="text-center">
                <h1 class="text-2xl md:text-3xl font-bold text-emerald-800">Kuis Uji Pemahaman Kasus</h1>
                <div id="progress-section" class="mt-6 w-full max-w-md mx-auto"></div>
                <button id="start-quiz-btn" class="mt-8 bg-emerald-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-emerald-700 transition-colors shadow-lg">Mulai Kuis</button>
                <div id="time-selection-box" class="hidden mt-6">
                    <p class="font-semibold mb-4 text-slate-600">Pilih durasi waktu per soal:</p>
                    <div class="flex flex-wrap justify-center gap-3">
                        <button id="time-kilat-btn" class="bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 transition-colors">Kilat (10 detik)</button>
                        <button id="time-normal-btn" class="bg-emerald-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-emerald-700 transition-colors">Normal (30 detik)</button>
                        <button id="time-santai-btn" class="bg-sky-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-600 transition-colors">Santai (60 detik)</button>
                    </div>
                </div>
            </div>
            <div id="quiz-box" class="hidden"><div class="flex justify-between items-center border-b border-slate-200 pb-4 mb-6"><div id="question-counter" class="text-sm font-medium text-slate-500"></div><div class="flex items-center gap-4"><div id="score-board" class="text-sm font-medium text-slate-600">Skor: <span id="correct-answers" class="font-bold text-emerald-600">0</span></div><div class="text-sm font-medium text-slate-600">Waktu: <span id="remaining-time" class="font-bold w-6 inline-block text-center"></span>s</div></div></div><h2 id="question-text" class="text-xl font-semibold text-slate-800 mb-6"></h2><div id="options-container" class="space-y-3"></div><p id="time-up-text" class="hidden text-center font-bold text-red-500 mt-4">Waktu Habis!</p><div class="text-right mt-8"><button id="next-question-btn" class="hidden bg-emerald-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-emerald-700 transition-colors">Selanjutnya</button><button id="see-result-btn" class="hidden bg-emerald-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-emerald-700 transition-colors">Lihat Hasil</button></div></div>
            <div id="quiz-over-box" class="hidden text-center"><h1 class="text-2xl md:text-3xl font-bold text-emerald-800 mb-6">Hasil Kuis Anda</h1><div class="bg-slate-50 rounded-lg p-6 grid grid-cols-2 gap-4"><div class="p-2"><p class="text-sm text-slate-500">Total Soal</p><p id="total-questions" class="text-2xl font-bold text-slate-800"></p></div><div class="p-2"><p class="text-sm text-slate-500">Benar</p><p id="total-correct" class="text-2xl font-bold text-green-600"></p></div><div class="p-2"><p class="text-sm text-slate-500">Salah</p><p id="total-wrong" class="text-2xl font-bold text-red-500"></p></div><div class="p-2"><p class="text-sm text-slate-500">Persentase</p><p id="percentage" class="text-2xl font-bold text-slate-800"></p></div><div class="col-span-2 mt-4 p-4 bg-white rounded-lg border border-slate-200"><p id="appreciation-level" class="text-2xl font-bold text-center"></p><p id="appreciation-description" class="text-slate-600 text-center mt-2 text-sm"></p></div></div><div class="mt-8 flex justify-center gap-4"><button id="start-again-btn" class="bg-emerald-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-emerald-700 transition-colors">Ulangi Kuis</button></div></div>
        </div></section>
        
        <footer class="text-center mt-16 pt-8 border-t border-slate-200"><div class="mb-8"><p class="font-bold text-red-600">Disclaimer:</p><p class="text-sm text-slate-600 max-w-2xl mx-auto">Aplikasi ini adalah alat bantu belajar dan tidak menggantikan konsultasi medis profesional. Diagnosis dan penanganan harus dilakukan oleh dokter yang berkualifikasi.</p></div><div class="mt-8 pt-8 border-t border-slate-200"><p class="text-base font-semibold text-slate-800">dr. Rikki F. Sababalat</p><p class="text-sm text-slate-500 mt-1">© 2025</p></div></footer>
    </main>

    <script>
        // Data spesifik untuk kasus Perforasi Membran Timpani
        const caseData = {
            diagnoses: [
                {
                    id: 'penanganan-perdarahan', name: 'Penanganan Perdarahan Aktif', matchScore: 3, 
                    description: 'Analisis pernyataan: "Tidak perlu memasang tampon telinga dengan segera."',
                    analysis: 'TIDAK TEPAT. Pernyataan ini adalah pengecualian. Karena ada perdarahan aktif, tindakan hemostasis (menghentikan perdarahan) adalah prioritas. Pemasangan tampon steril mungkin diperlukan. Jadi, menyatakan "tidak perlu" secara absolut adalah tidak tepat.'
                },
                {
                    id: 'komplikasi-tuli', name: 'Komplikasi Gangguan Dengar', matchScore: 10,
                    description: 'Analisis pernyataan: "Komplikasi utama pada kasus ini adalah tuli konduktif."',
                    analysis: 'SANGAT TEPAT. Robekan pada membran timpani secara langsung mengganggu mekanisme penghantaran suara dari telinga luar ke telinga tengah, yang merupakan definisi dari tuli konduktif. Ini adalah komplikasi yang paling umum dan diharapkan.'
                },
                {
                    id: 'edukasi-pasien', name: 'Edukasi Pasien', matchScore: 10,
                    description: 'Analisis pernyataan: "Pasien harus diedukasi untuk tidak mengorek telinga atau berenang."',
                    analysis: 'SANGAT TEPAT. Menjaga liang telinga tetap kering dan menghindari trauma tambahan adalah pilar utama penatalaksanaan konservatif. Ini mempercepat penyembuhan spontan dan mencegah infeksi sekunder (otitis media).'
                },
                {
                    id: 'kontraindikasi-obat', name: 'Kontraindikasi Obat Tetes', matchScore: 10,
                    description: 'Analisis pernyataan: "Pemberian antibiotik tobramisin tetes telinga harus dihindari."',
                    analysis: 'SANGAT TEPAT. Antibiotik golongan aminoglikosida (seperti tobramisin, gentamisin) bersifat ototoksik. Penggunaannya pada telinga dengan membran timpani yang berlubang merupakan kontraindikasi absolut karena obat dapat masuk ke telinga tengah dan merusak struktur telinga dalam secara permanen.'
                },
                {
                    id: 'indikasi-operasi', name: 'Indikasi Operasi', matchScore: 9,
                    description: 'Analisis pernyataan: "Tindakan operatif dipertimbangkan jika robekan tidak menutup setelah >2 bulan."',
                    analysis: 'SANGAT TEPAT. Sebagian besar kasus perforasi traumatik sembuh secara spontan. Operasi (timpanoplasti) hanya diindikasikan jika penyembuhan gagal setelah periode observasi yang cukup (umumnya 2-3 bulan).'
                }
            ],
            quiz: [
                { question: "Apa komplikasi gangguan pendengaran yang paling umum dari robekan membran timpani?", options: ["Tuli Sensorineural", "Tuli Konduktif", "Tuli Campuran", "Tinnitus"], answer: "Tuli Konduktif" },
                { question: "Mengapa antibiotik seperti tobramisin tetes telinga berbahaya pada kasus ini?", options: ["Menyebabkan reaksi alergi", "Tidak efektif untuk bakteri di telinga", "Bersifat ototoksik dan bisa merusak telinga dalam", "Menghambat penyembuhan luka"], answer: "Bersifat ototoksik dan bisa merusak telinga dalam" },
                { question: "Kapan tindakan operasi (timpanoplasti) biasanya dipertimbangkan untuk robekan membran timpani?", options: ["Segera setelah kecelakaan", "Jika pasien mengeluh nyeri", "Jika tidak sembuh spontan setelah 2-3 bulan", "Jika terjadi pada anak-anak"], answer: "Jika tidak sembuh spontan setelah 2-3 bulan" },
                { question: "Manakah anjuran yang PALING PENTING untuk pasien demi mendukung penyembuhan?", options: ["Minum obat pereda nyeri", "Banyak beristirahat", "Menjaga telinga agar tetap kering dan tidak mengoreknya", "Menggunakan penutup telinga saat tidur"], answer: "Menjaga telinga agar tetap kering dan tidak mengoreknya" },
                { question: "Dalam kondisi spesifik apa pemasangan tampon telinga mungkin diperlukan pada pasien ini?", options: ["Untuk menyerap nanah", "Untuk memasukkan obat", "Jika ada perdarahan aktif yang perlu dihentikan", "Untuk mengurangi rasa sakit"], answer: "Jika ada perdarahan aktif yang perlu dihentikan" }
            ]
        };

        // --- SCRIPT LOGIC (Sama seperti sebelumnya, tidak perlu diubah) ---
        function shuffleArray(array) { for (let i = array.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [array[i], array[j]] = [array[j], array[i]]; } }
        shuffleArray(caseData.diagnoses);
        const { diagnoses, quiz: quizData } = caseData;
        const navContainer = document.getElementById('diagnosis-nav');
        const detailsContainer = document.getElementById('diagnosis-details');
        const conclusionSection = document.getElementById('conclusion');
        let clickedDiagnoses = new Set();
        const startQuizBtn = document.getElementById('start-quiz-btn');

        function renderDetails(diagnosisId) { const diagnosis = diagnoses.find(d => d.id === diagnosisId); if (!diagnosis) return; const wasClickedBefore = clickedDiagnoses.has(diagnosisId); if (!wasClickedBefore) { clickedDiagnoses.add(diagnosisId); updateProgressUI(); } if (clickedDiagnoses.size === diagnoses.length) { setTimeout(() => conclusionSection.classList.remove('hidden'), 300); } const getScoreColor = (score) => { if (score >= 8) return '#10b981'; if (score >= 5) return '#f59e0b'; return '#ef4444'; }; detailsContainer.innerHTML = `<div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200"><div class="text-center md:text-left"><h3 class="text-2xl font-bold text-emerald-800">${diagnosis.name}</h3><p class="text-slate-600 mt-1">${diagnosis.description}</p></div><div class="mt-4 pt-4 border-t border-slate-200"><h4 class="font-semibold text-slate-700">Analisis Relevansi dengan Kasus:</h4><p class="text-slate-600 mt-1 mb-4">${diagnosis.analysis}</p><div><h5 class="text-sm font-semibold text-slate-600 mb-1">Skor Kebenaran Prinsip: <span class="font-bold text-black">${diagnosis.matchScore} / 10</span></h5><div class="w-full bg-slate-200 rounded-full h-2.5"><div class="h-2.5 rounded-full" style="width: ${(diagnosis.matchScore / 10) * 100}%; background-color: ${getScoreColor(diagnosis.matchScore)};"></div></div></div></div></div>`; detailsContainer.style.height = 'auto'; const currentHeight = detailsContainer.scrollHeight; detailsContainer.style.height = '0'; setTimeout(() => { detailsContainer.style.height = currentHeight + 'px'; }, 10); document.querySelectorAll('#diagnosis-nav button').forEach(btn => { btn.classList.toggle('nav-button-active', btn.dataset.id === diagnosisId); btn.classList.toggle('nav-button-inactive', btn.dataset.id !== diagnosisId); }); }
        
        function createNav() { diagnoses.forEach(diagnosis => { const button = document.createElement('button'); button.textContent = diagnosis.name; button.dataset.id = diagnosis.id; button.className = 'px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 nav-button-inactive'; button.onclick = () => renderDetails(diagnosis.id); navContainer.appendChild(button); }); }
        function createProgressUI() {
            const progressSection = document.getElementById('progress-section');
            progressSection.innerHTML = `<div class="battery" id="summary-battery">${Array(diagnoses.length).fill('<div class="battery-segment"></div>').join('')}</div><div id="summary-percentage">0%</div><ul id="diagnosis-checklist">${diagnoses.map(d => `<li id="checklist-${d.id}">${d.name}</li>`).join('')}</ul>`;
        }
        function updateProgressUI() {
            const numCompleted = clickedDiagnoses.size; const total = diagnoses.length; const percentage = Math.round((numCompleted / total) * 100);
            document.getElementById('summary-percentage').textContent = `${percentage}%`;
            document.querySelectorAll('#summary-battery .battery-segment').forEach((segment, index) => { segment.classList.toggle('filled', index < numCompleted); });
            diagnoses.forEach(d => { const item = document.getElementById(`checklist-${d.id}`); if (clickedDiagnoses.has(d.id)) { item.classList.add('completed'); item.innerHTML = `✅ ${d.name}`; } });
            if (numCompleted === total) { startQuizBtn.disabled = false; startQuizBtn.classList.add('electric-effect'); }
        }
        
        let timePerQuestion = 30; let currentQuestionIndex = 0, score = 0, questionOrder = [], interval;
        const quizHomeBox = document.getElementById('quiz-home-box'); const quizBox = document.getElementById('quiz-box'); const quizOverBox = document.getElementById('quiz-over-box'); const timeSelectionBox = document.getElementById('time-selection-box'); const scoreBoardElement = document.getElementById('correct-answers'); const remainingTimeElement = document.getElementById('remaining-time'); const optionsContainer = document.getElementById('options-container'); const nextQuestionBtn = document.getElementById('next-question-btn'); const seeResultBtn = document.getElementById('see-result-btn');
        
        function getAppreciationInfo(score, total) { const p = total > 0 ? (score / total) * 100 : 0; if (p >= 95) return { level: "Master! 🏆", desc: "Pemahaman Anda sangat mendalam dan komprehensif. Luar biasa!" }; if (p >= 80) return { level: "Ahli 🧠", desc: "Anda punya pemahaman yang kuat tentang konsep-konsep kunci. Kerja bagus!" }; if (p >= 60) return { level: "Cukup Baik 👍", desc: "Dasar-dasarnya sudah Anda kuasai. Teruslah berlatih." }; if (p >= 40) return { level: "Perlu Peningkatan 📚", desc: "Anda di jalur yang benar, namun beberapa konsep penting perlu ditinjau kembali." }; return { level: "Mari Belajar Lagi 💪", desc: "Jangan khawatir! Ulas kembali materi kasus untuk memperkuat pemahaman dasar." }; }
        function resetQuizState() { currentQuestionIndex = 0; score = 0; questionOrder = [...Array(quizData.length).keys()].sort(() => Math.random() - 0.5); }
        function startQuiz(time) { timePerQuestion = time; quizHomeBox.classList.add('hidden'); quizBox.classList.remove('hidden'); resetQuizState(); loadQuestion(); }
        function loadQuestion() { const qIndex = questionOrder[currentQuestionIndex]; const q = quizData[qIndex]; document.getElementById('question-counter').textContent = `Pertanyaan ${currentQuestionIndex + 1} dari ${quizData.length}`; document.getElementById('question-text').textContent = q.question; optionsContainer.innerHTML = ''; q.options.sort(() => Math.random() - 0.5).forEach(o => { const btn = document.createElement('button'); btn.textContent = o; btn.className = 'option-btn w-full text-left p-4 border-2 border-slate-200 rounded-lg text-slate-700 font-medium'; btn.onclick = () => checkAnswer(btn, o, q.answer); optionsContainer.appendChild(btn); }); startTimer(); }
        function checkAnswer(btn, selected, correct) { stopTimer(); Array.from(optionsContainer.children).forEach(b => { b.disabled = true; if (b.textContent === correct) b.classList.add('correct'); }); if (selected === correct) { score++; scoreBoardElement.textContent = score; } else { btn.classList.add('incorrect'); } (currentQuestionIndex < quizData.length - 1 ? nextQuestionBtn : seeResultBtn).classList.remove('hidden'); }
        function startTimer() { let time = timePerQuestion; remainingTimeElement.textContent = time; remainingTimeElement.classList.remove('less-time'); document.getElementById('time-up-text').classList.add('hidden'); interval = setInterval(() => { time--; if (time < 10) remainingTimeElement.classList.add('less-time'); remainingTimeElement.textContent = time; if (time <= 0) timeIsUp(); }, 1000); }
        function timeIsUp() { stopTimer(); document.getElementById('time-up-text').classList.remove('hidden'); checkAnswer({}, '', quizData[questionOrder[currentQuestionIndex]].answer); }
        function stopTimer() { clearInterval(interval); }
        function showNextQuestion() { currentQuestionIndex++; nextQuestionBtn.classList.add('hidden'); loadQuestion(); }
        function showResults() { quizBox.classList.add('hidden'); quizOverBox.classList.remove('hidden'); const total = quizData.length; document.getElementById('total-questions').textContent = total; document.getElementById('total-correct').textContent = score; document.getElementById('total-wrong').textContent = total - score; document.getElementById('percentage').textContent = `${total > 0 ? ((score / total) * 100).toFixed(0) : 0}%`; const { level, desc } = getAppreciationInfo(score, total); document.getElementById('appreciation-level').textContent = level; document.getElementById('appreciation-description').textContent = desc; }
        
        document.getElementById('start-quiz-btn').addEventListener('click', () => { document.getElementById('start-quiz-btn').classList.add('hidden'); document.getElementById('time-selection-box').classList.remove('hidden'); });
        document.getElementById('time-kilat-btn').addEventListener('click', () => startQuiz(10));
        document.getElementById('time-normal-btn').addEventListener('click', () => startQuiz(30));
        document.getElementById('time-santai-btn').addEventListener('click', () => startQuiz(60));
        nextQuestionBtn.addEventListener('click', showNextQuestion);
        seeResultBtn.addEventListener('click', showResults);
        document.getElementById('start-again-btn').addEventListener('click', () => { quizOverBox.classList.add('hidden'); quizHomeBox.classList.remove('hidden'); document.getElementById('time-selection-box').classList.add('hidden'); document.getElementById('start-quiz-btn').classList.remove('hidden'); seeResultBtn.classList.add('hidden'); nextQuestionBtn.classList.add('hidden'); scoreBoardElement.textContent = 0; });
        
        window.onload = () => { createNav(); createProgressUI(); startQuizBtn.disabled = true; };
    </script>
</body>
</html>