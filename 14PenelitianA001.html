<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studi Kasus & Kuis Interaktif: Analisis Efektivitas Antibiotik</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* bg-slate-50 */
            color: #334155; /* text-slate-700 */
        }
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .viz-icon {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            border-radius: 0.75rem; /* rounded-xl */
        }
        .nav-button-active {
            background-color: #047857; /* bg-emerald-700 */
            color: #ffffff;
            font-weight: 600;
        }
        .nav-button-inactive {
            background-color: #ecfdf5; /* bg-emerald-50 */
            color: #064e3b; /* text-emerald-900 */
            border: 1px solid #d1fae5; /* border-emerald-200 */
        }
        .option-btn {
            transition: background-color 0.3s, border-color 0.3s, color 0.3s;
        }
        .option-btn:hover {
            background-color: #d1fae5; /* hover:bg-emerald-100 */
            border-color: #10b981; /* hover:border-emerald-500 */
        }
        .option-btn.selected {
            background-color: #10b981; /* bg-emerald-500 */
            color: white;
            border-color: #059669; /* border-emerald-700 */
        }
        .option-btn.correct {
            background-color: #34d399; /* bg-emerald-400 */
            color: white;
            border-color: #10b981;
        }
        .option-btn.incorrect {
            background-color: #f87171; /* bg-red-400 */
            color: white;
            border-color: #ef4444;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-700">

    <main class="container mx-auto p-4 sm:p-6 md:p-8 max-w-5xl">

        <nav class="flex justify-between items-center mb-8">
            <a href="farmakologi-modul.html" class="inline-flex items-center text-emerald-700 hover:text-emerald-900 font-semibold transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                Kembali ke Daftar Kasus
            </a>
            <a href="index.html" class="inline-flex items-center text-sm text-slate-500 hover:text-emerald-700 font-medium transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
                Halaman Utama
            </a>
        </nav>

        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-emerald-800">Menganalisis Kasus Efektivitas Obat</h1>
            <p class="mt-2 text-lg text-slate-600">Alat bantu interaktif untuk memahami signifikansi statistik dalam uji klinis.</p>
        </header>

        <section id="case-summary" class="mb-12 bg-white p-6 rounded-xl shadow-lg border border-slate-200">
            <h2 class="text-2xl font-semibold text-emerald-700 mb-4">Ringkasan Kasus</h2>
            <div class="space-y-4 text-slate-600">
                <p>Seorang dokter sedang membaca artikel ilmiah untuk membandingkan efektivitas dua obat antibiotik, <strong>Ceftriaxone</strong> dan <strong>Cefoperazone</strong>, terhadap penurunan jumlah koloni bakteri E. coli.</p>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-emerald-50 p-4 rounded-lg border border-emerald-100">
                        <h3 class="font-bold text-emerald-900">Ceftriaxone</h3>
                        <p>Penurunan koloni: <strong>10¹ - 10² CFU/mL</strong></p>
                        <p>Signifikansi Statistik (p-value): <strong class="text-red-600">0,010</strong></p>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
                        <h3 class="font-bold text-blue-900">Cefoperazone</h3>
                        <p>Penurunan koloni: <strong>10² - 10³ CFU/mL</strong></p>
                        <p>Signifikansi Statistik (p-value): <strong class="text-gray-500">0,075</strong></p>
                    </div>
                </div>
            </div>
        </section>

        <section id="differential-diagnosis" class="mb-12">
            <h2 class="text-2xl font-semibold text-emerald-700 mb-2 text-center">Obat manakah yang sebaiknya dipilih dokter tersebut?</h2>
            <p class="text-center text-slate-600 mb-6">Klik pada setiap pilihan untuk melihat analisisnya.</p>
            <nav id="diagnosis-nav" class="flex flex-wrap justify-center gap-2 mb-8"></nav>
            <div id="diagnosis-details"></div>
        </section>
        
        <section id="comparison-chart" class="mb-12 bg-white p-6 rounded-xl shadow-lg border border-slate-200">
            <h2 class="text-2xl font-semibold text-emerald-700 mb-1 text-center">Perbandingan Validitas Pilihan</h2>
            <p class="text-center text-sm text-slate-500 mb-6">Visualisasi tingkat kebenaran berdasarkan analisis statistik.</p>
            <div class="chart-container">
                <canvas id="matchChart"></canvas>
            </div>
        </section>

        <section id="conclusion" class="bg-emerald-50 border-2 border-emerald-500 rounded-xl p-6 shadow-lg">
            <h2 class="text-2xl font-bold text-emerald-800 mb-4">Kesimpulan Pilihan Obat</h2>
            <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="viz-icon bg-emerald-200">
                    <div class="w-12 h-12 bg-emerald-400 rounded-full flex items-center justify-center text-3xl">💊</div>
                </div>
                <div class="flex-1">
                    <p class="text-3xl font-bold text-emerald-900">Pilih Ceftriaxone</p>
                    <p class="mt-2 text-emerald-700">Pilihan yang paling tepat adalah <strong>Ceftriaxone</strong>. Meskipun rentang penurunan koloninya tampak lebih rendah, hasilnya <strong>signifikan secara statistik (p < 0.05)</strong>, yang menjadikannya pilihan yang dapat diandalkan secara ilmiah.</p>
                </div>
            </div>
        </section>

        <hr class="my-16 border-slate-300">

        <section id="quiz-section" class="flex items-center justify-center">
            <div id="quiz-container" class="bg-white w-full max-w-2xl rounded-xl shadow-2xl p-6 md:p-8">
                <div id="quiz-header">
                    <h1 class="text-2xl md:text-3xl font-bold text-emerald-800 text-center">Kuis Analisis Statistik</h1>
                    <p class="text-slate-500 text-center mt-2">Uji pemahaman Anda tentang konsep p-value dalam kasus ini.</p>
                    <div class="h-1 bg-slate-200 rounded-full mt-6">
                        <div id="progress-bar" class="h-full bg-emerald-500 rounded-full transition-all duration-500" style="width: 0%;"></div>
                    </div>
                </div>

                <div id="quiz-body" class="mt-8">
                    </div>

                <div id="quiz-footer" class="mt-8 flex justify-between items-center">
                    <p id="question-counter" class="text-sm font-medium text-slate-500"></p>
                    <button id="next-btn" class="bg-emerald-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-slate-300 disabled:cursor-not-allowed">Selanjutnya</button>
                </div>
                
                <div id="result-container" class="hidden text-center mt-8">
                    <h2 class="text-2xl font-bold text-emerald-800">Kuis Selesai!</h2>
                    <p class="text-lg text-slate-600 mt-2">Skor Akhir Anda:</p>
                    <p id="score-text" class="text-5xl font-bold text-emerald-600 my-4">0/0</p>
                    <p id="feedback-text" class="text-slate-500 mb-6"></p>
                    <button id="restart-btn" class="bg-emerald-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-emerald-700 transition-colors">Ulangi Kuis</button>
                </div>
            </div>
        </section>

        <section class="mt-16 text-center">
            <a href="kasus-selanjutnya.html" class="inline-flex items-center bg-emerald-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-emerald-700 transition-colors shadow-lg">
                Lanjutkan ke Kasus Berikutnya
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                </svg>
            </a>
        </section>

        <footer class="text-center mt-16 pt-8 border-t border-slate-200">
            <div class="mb-8">
                <p class="font-bold text-red-600">Disclaimer:</p>
                <p class="text-sm text-slate-600 max-w-2xl mx-auto">Aplikasi ini adalah alat bantu belajar dan tidak menggantikan konsultasi medis profesional. Diagnosis dan penanganan harus dilakukan oleh dokter yang berkualifikasi.</p>
            </div>
            
            <div class="mt-8 pt-8 border-t border-slate-200">
                <div class="flex justify-center items-start space-x-8 mb-4">
                    <a href="https://www.instagram.com/rikki_8523/?utm_source=qr&igsh=MTk3NW55cm12Z3Jybw%3D%3D#" target="_blank" rel="noopener noreferrer" class="flex flex-col items-center text-slate-500 hover:opacity-80 transition-opacity" aria-label="Instagram">
                        <svg class="w-7 h-7" viewBox="0 0 32 32"><defs><radialGradient id="ig-gradient" gradientUnits="userSpaceOnUse" cx="8.982" cy="23.018" r="31.259"><stop offset="0" stop-color="#fdf497"/><stop offset="0.25" stop-color="#fd5949"/><stop offset="0.5" stop-color="#d6249f"/><stop offset="0.75" stop-color="#285AEB"/></radialGradient></defs><path d="M22.9,0H9.1C4.1,0,0,4.1,0,9.1v13.8C0,27.9,4.1,32,9.1,32h13.8c5,0,9.1-4.1,9.1-9.1V9.1C32,4.1,27.9,0,22.9,0z M16,21.8c-3.2,0-5.8-2.6-5.8-5.8s2.6-5.8,5.8-5.8s5.8,2.6,5.8,5.8S19.2,21.8,16,21.8z M23.9,9.4c-1.2,0-2.2-1-2.2-2.2s1-2.2,2.2-2.2s2.2,1,2.2,2.2S25.1,9.4,23.9,9.4z" fill="url(#ig-gradient)"/><path d="M16,11.3c-2.6,0-4.7,2.1-4.7,4.7s2.1,4.7,4.7,4.7s4.7-2.1,4.7-4.7S18.6,11.3,16,11.3z" fill="#fff"/><path d="M23.9,6.2c-0.6,0-1.1,0.5-1.1,1.1c0,0.6,0.5,1.1,1.1,1.1s1.1-0.5,1.1-1.1C25,6.7,24.5,6.2,23.9,6.2z" fill="#fff"/></svg>
                        <span class="text-xs mt-2 font-medium">Instagram</span>
                    </a>
                    <a href="https://youtube.com/@rikkisababalat?si=eYCkz_sgx1hvcfhR" target="_blank" rel="noopener noreferrer" class="flex flex-col items-center text-slate-500 hover:opacity-80 transition-opacity" aria-label="YouTube">
                        <svg class="w-8 h-8" viewBox="0 0 28 20"><path fill="#FF0000" d="M27.4,3.1c-0.4-1.4-1.5-2.5-2.9-2.9C22.6,0,14,0,14,0S5.4,0,3.5,0.3C2.1,0.6,1,1.7,0.6,3.1C0,5.4,0,10,0,10s0,4.6,0.6,6.9c0.4,1.4,1.5,2.5,2.9,2.9C5.4,20,14,20,14,20s8.6,0,10.5-0.3c1.4-0.4,2.5-1.5,2.9-2.9C28,14.6,28,10,28,10S28,5.4,27.4,3.1z"/><path fill="#FFFFFF" d="M11.2,14.3L18.4,10L11.2,5.7V14.3z"/></svg>
                        <span class="text-xs mt-1 font-medium">YouTube</span>
                    </a>
                    <a href="https://www.tiktok.com/" target="_blank" rel="noopener noreferrer" class="flex flex-col items-center text-slate-500 hover:opacity-80 transition-opacity" aria-label="TikTok">
                        <svg class="w-7 h-7" viewBox="0 0 24 24"><defs><filter id="tiktok-shadow"><feDropShadow dx="2" dy="2" stdDeviation="0.5" flood-color="#69C9D0"/><feDropShadow dx="-2" dy="-2" stdDeviation="0.5" flood-color="#EE1D52"/></filter></defs><path fill="#25F4EE" d="M16.6,5.82s.06-.02.18-.04.4-.04.72-.04c.7,0,1.28.1,1.74.32.48.22.84.56,1.1,1,.24.44.36.96.36,1.56,0,.66-.14,1.24-.42,1.74-.28.5-.68.88-1.2,1.12a2.92,2.92,0,0,1-1.76.42c-.44,0-.84-.06-1.2-.18V3.6c-2.34-.66-4.22-2.54-4.22-4.84H2v15.52a3.3,3.3,0,0,0,1.18,2.58c.6.6,1.36.9,2.28.9,1.9,0,3.44-1.54,3.44-3.44V9.52c1.34.38,2.22,1.34,2.22,2.64,0,1.52-1.24,2.76-2.76,2.76-.4,0-.78-.1-1.1-.26-.24-.12-.46-.28-.64-.48z" transform="translate(-2 -2.1)" style="filter:url(#tiktok-shadow)"/><path fill="#010101" d="M16.6,5.82s.06-.02.18-.04.4-.04.72-.04c.7,0,1.28.1,1.74.32.48.22.84.56,1.1,1,.24.44.36.96.36,1.56,0,.66-.14,1.24-.42,1.74-.28.5-.68.88-1.2,1.12a2.92,2.92,0,0,1-1.76.42c-.44,0-.84-.06-1.2-.18v5.52a3.3,3.3,0,0,1-1.18,2.58c-.6.6,1.36.9-2.28.9-1.9,0-3.44-1.54-3.44-3.44S9.66,14.9,11.56,14.9c.34,0,.68.04,1.02.14V9.52c-1.34-.38-2.22-1.34-2.22-2.64,0-1.52,1.24-2.76,2.76-2.76.4,0,.78.1,1.1.26.24.12.46.28.64-.48z" transform="translate(-2 -2.1)"/></svg>
                        <span class="text-xs mt-2 font-medium">TikTok</span>
                    </a>
                </div>
                <p class="text-base font-semibold text-slate-800">dr. Rikki F. Sababalat</p>
                <p class="text-sm text-slate-500 mt-1">© 2025</p>
            </div>
        </footer>

    </main>

    <script>
        // Ganti data di bawah ini untuk setiap halaman kasus yang berbeda
        const caseData = {
            diagnoses: [
                { id: 'option-c', name: 'Pilih Ceftriaxone, karena (p=0,010)', matchScore: 10, vizIconHtml: `<div class="viz-icon bg-emerald-200"><div class="w-12 h-12 bg-emerald-400 rounded-full flex items-center justify-center text-3xl">🏆</div></div>`, description: 'Ceftriaxone dipilih karena nilai p = 0,010.', analysis: 'SANGAT TEPAT. Nilai p < 0.05 menunjukkan bahwa hasil penelitian signifikan secara statistik. Ini adalah dasar pengambilan keputusan klinis yang paling kuat dalam skenario ini, karena membuktikan efektivitas obat bukan karena faktor kebetulan.' },
                { id: 'option-b', name: 'Pilih Cefoperazone, karena penurunan koloni 10²-10³ CFU/mL', matchScore: 4, vizIconHtml: `<div class="viz-icon bg-yellow-100"><div class="w-12 h-12 bg-yellow-300 rounded-full flex items-center justify-center text-3xl">🤔</div></div>`, description: 'Cefoperazone dipilih karena menurunkan koloni lebih baik (10²-10³ CFU/mL).', analysis: 'KURANG TEPAT. Meskipun rentang penurunannya terlihat lebih tinggi, hasil ini tidak signifikan secara statistik (p = 0,075). Mengandalkan data yang tidak signifikan dapat mengarah pada keputusan klinis yang tidak valid.' },
                { id: 'option-d', name: 'Pilih Cefoperazone (p=0,075)', matchScore: 1, vizIconHtml: `<div class="viz-icon bg-red-200"><div class="w-12 h-12 bg-red-400 rounded-full flex items-center justify-center text-3xl">❌</div></div>`, description: 'Cefoperazone dipilih karena nilai p = 0,075.', analysis: 'TIDAK TEPAT. Nilai p = 0,075 berada di atas ambang batas signifikansi (0,05). Ini menunjukkan hasil tersebut tidak dapat diandalkan, sehingga menjadikan nilai p ini sebagai alasan pemilihan adalah sebuah kesalahan interpretasi statistik.' },
                { id: 'option-a', name: 'Pilih Ceftriaxone, karena penurunan koloni 10²-10³ CFU/mL', matchScore: 0, vizIconHtml: `<div class="viz-icon bg-red-200"><div class="w-12 h-12 bg-red-400 rounded-full flex items-center justify-center text-3xl">❓</div></div>`, description: 'Ceftriaxone dipilih karena menurunkan koloni sebesar 10²-10³ CFU/mL.', analysis: 'SALAH. Pilihan ini menyajikan data yang salah. Menurut artikel, Ceftriaxone menurunkan koloni sebesar 10¹-10² CFU/mL, bukan 10²-10³ CFU/mL.' },
                { id: 'option-e', name: 'Tidak keduanya (tidak efektif)', matchScore: 0, vizIconHtml: `<div class="viz-icon bg-gray-200"><div class="w-12 h-12 bg-gray-400 rounded-full flex items-center justify-center text-3xl">🤷</div></div>`, description: 'Tidak ada yang dipilih karena keduanya tidak efektif.', analysis: 'SALAH. Ceftriaxone terbukti efektif secara statistik. Menyimpulkan bahwa keduanya tidak efektif mengabaikan bukti signifikansi yang jelas dari Ceftriaxone.' }
            ],
            quiz: [
                { question: "Apa metrik utama yang digunakan untuk menentukan apakah hasil penelitian dapat diandalkan dalam kasus ini?", options: ["Jumlah penurunan koloni", "Nama obat", "Nilai p (p-value)", "Jenis bakteri"], answer: "Nilai p (p-value)" },
                { question: "Mengapa nilai p = 0,010 untuk Ceftriaxone dianggap signifikan?", options: ["Karena angkanya kecil", "Karena lebih kecil dari 0,05", "Karena lebih besar dari 0,01", "Karena ini adalah antibiotik yang kuat"], answer: "Karena lebih kecil dari 0,05" },
                { question: "Apa kelemahan utama dari data Cefoperazone meskipun rentang penurunannya tampak lebih tinggi?", options: ["Obatnya lebih mahal", "Efek sampingnya lebih banyak", "Hasilnya tidak signifikan secara statistik (p > 0.05)", "Dosisnya lebih tinggi"], answer: "Hasilnya tidak signifikan secara statistik (p > 0.05)" },
                { question: "Jika sebuah obat memiliki p-value 0.50, apa artinya?", options: ["Sangat efektif", "Efektivitasnya 50%", "Hasilnya kemungkinan besar karena kebetulan", "Hanya bekerja pada 50% pasien"], answer: "Hasilnya kemungkinan besar karena kebetulan" },
                { question: "Berdasarkan analisis statistik yang benar, obat mana yang harus dipilih oleh dokter?", options: ["Cefoperazone, karena lebih kuat", "Ceftriaxone, karena p-value-nya signifikan", "Keduanya sama baiknya", "Tidak ada yang boleh dipilih"], answer: "Ceftriaxone, karena p-value-nya signifikan" }
            ]
        };

        const { diagnoses, quiz: quizData } = caseData;
        
        const navContainer = document.getElementById('diagnosis-nav');
        const detailsContainer = document.getElementById('diagnosis-details');
        let chart = null;

        function renderDetails(diagnosisId) {
            const diagnosis = diagnoses.find(d => d.id === diagnosisId);
            if (!diagnosis) return;
            detailsContainer.innerHTML = `
                <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200 transition-all duration-300 ease-in-out">
                    <div class="flex flex-col md:flex-row items-center gap-6">
                        ${diagnosis.vizIconHtml}
                        <div class="flex-1 text-center md:text-left">
                            <h3 class="text-2xl font-bold text-emerald-800">${diagnosis.name}</h3>
                            <p class="text-slate-600 mt-1">${diagnosis.description}</p>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-slate-200">
                        <h4 class="font-semibold text-slate-700">Analisis Validitas:</h4>
                        <p class="text-slate-600 mt-1">${diagnosis.analysis}</p>
                    </div>
                </div>
            `;
            document.querySelectorAll('#diagnosis-nav button').forEach(btn => {
                btn.classList.toggle('nav-button-active', btn.dataset.id === diagnosisId);
                btn.classList.toggle('nav-button-inactive', btn.dataset.id !== diagnosisId);
            });
        }

        function createNav() {
            diagnoses.forEach(diagnosis => {
                const button = document.createElement('button');
                button.textContent = diagnosis.name;
                button.dataset.id = diagnosis.id;
                button.className = 'px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 nav-button-inactive';
                button.onclick = () => renderDetails(diagnosis.id);
                navContainer.appendChild(button);
            });
        }

        function createChart() {
            const ctx = document.getElementById('matchChart').getContext('2d');
            const data = {
                labels: diagnoses.map(d => d.name),
                datasets: [{
                    label: 'Tingkat Validitas',
                    data: diagnoses.map(d => d.matchScore),
                    backgroundColor: diagnoses.map(d => d.matchScore >= 9 ? '#059669' : (d.matchScore >= 4 ? '#f59e0b' : '#ef4444')),
                    borderColor: diagnoses.map(d => d.matchScore >= 9 ? '#065f46' : (d.matchScore >= 4 ? '#b45309' : '#b91c1c')),
                    borderWidth: 1,
                    borderRadius: 4
                }]
            };
            if(chart) { chart.destroy(); }
            chart = new Chart(ctx, {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: { beginAtZero: true, max: 10, title: { display: true, text: 'Skor Validitas (0-10)', font: { size: 14 } } },
                        y: { ticks: { font: { size: 12 } } }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { label: (context) => ` Skor: ${context.parsed.x}` } }
                    }
                }
            });
        }
        
        const quizContainer = document.getElementById('quiz-container');
        let currentQuestionIndex = 0;
        let score = 0;
        let selectedAnswer = null;

        function loadQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            selectedAnswer = null;
            
            const quizHeader = quizContainer.querySelector('#quiz-header');
            const quizBody = quizContainer.querySelector('#quiz-body');
            const quizFooter = quizContainer.querySelector('#quiz-footer');
            const resultContainer = quizContainer.querySelector('#result-container');
            
            if (quizHeader) quizHeader.classList.remove('hidden');
            if (quizBody) quizBody.classList.remove('hidden');
            if (quizFooter) quizFooter.classList.remove('hidden');
            if (resultContainer) resultContainer.classList.add('hidden');
            
            loadQuestion();
        }

        function loadQuestion() {
            selectedAnswer = null;
            const currentQuestion = quizData[currentQuestionIndex];
            const quizBody = quizContainer.querySelector('#quiz-body');
            quizBody.innerHTML = `
                <h2 class="text-xl font-semibold text-slate-800 mb-6">${currentQuestion.question}</h2>
                <div id="options-container" class="space-y-3">
                    ${currentQuestion.options.map(option => `
                        <button class="option-btn w-full text-left p-4 border-2 border-slate-200 rounded-lg text-slate-700 font-medium">
                            ${option}
                        </button>
                    `).join('')}
                </div>
            `;
            updateProgress();
            
            const nextBtn = quizContainer.querySelector('#next-btn');
            if(nextBtn) nextBtn.disabled = true;

            const optionButtons = quizBody.querySelectorAll('.option-btn');
            optionButtons.forEach(button => {
                button.addEventListener('click', () => {
                    optionButtons.forEach(btn => btn.classList.remove('selected'));
                    button.classList.add('selected');
                    selectedAnswer = button.textContent.trim();
                    if(nextBtn) nextBtn.disabled = false;
                });
            });
        }
        
        function updateProgress() {
            const questionCounter = quizContainer.querySelector('#question-counter');
            const progressBar = quizContainer.querySelector('#progress-bar');
            if(questionCounter) questionCounter.textContent = `Pertanyaan ${currentQuestionIndex + 1} dari ${quizData.length}`;
            if(progressBar) {
                const progressPercentage = ((currentQuestionIndex) / quizData.length) * 100;
                progressBar.style.width = `${progressPercentage}%`;
            }
        }

        function showResults() {
            const progressBar = quizContainer.querySelector('#progress-bar');
            if (progressBar) progressBar.style.width = '100%';

            quizContainer.querySelector('#quiz-header').classList.add('hidden');
            quizContainer.querySelector('#quiz-body').classList.add('hidden');
            quizContainer.querySelector('#quiz-footer').classList.add('hidden');
            
            const resultContainer = quizContainer.querySelector('#result-container');
            resultContainer.classList.remove('hidden');

            const scoreText = resultContainer.querySelector('#score-text');
            scoreText.textContent = `${score}/${quizData.length}`;

            const feedbackText = resultContainer.querySelector('#feedback-text');
            let feedback = "Kerja bagus!";
            const percentage = (score / quizData.length) * 100;
            if (percentage < 50) {
                feedback = "Mungkin perlu meninjau kembali materinya.";
            } else if (percentage < 80) {
                feedback = "Pemahaman yang baik!";
            } else {
                feedback = "Pemahaman yang luar biasa!";
            }
            feedbackText.textContent = feedback;
        }

        quizContainer.addEventListener('click', (e) => {
            if (e.target.id === 'next-btn') {
                if (selectedAnswer === null) return;
                const isCorrect = selectedAnswer === quizData[currentQuestionIndex].answer;
                if (isCorrect) { score++; }
                currentQuestionIndex++;
                if (currentQuestionIndex < quizData.length) {
                    loadQuestion();
                } else {
                    showResults();
                }
            } else if (e.target.id === 'restart-btn') {
                loadQuiz();
            }
        });
        
        window.onload = () => {
            createNav();
            if (diagnoses.length > 0) {
                renderDetails(diagnoses[0].id);
            }
            createChart();
            loadQuiz();
        };
    </script>
</body>
</html>