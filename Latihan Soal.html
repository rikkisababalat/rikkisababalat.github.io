<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latihan Analisis Kasus</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals with Blue-Green Accent -->
    <!-- Application Structure Plan: The SPA is designed as a guided diagnostic journey in five parts: 1. Case Summary for a quick overview. 2. Clinical & Lab Findings presented in distinct, digestible cards. 3. Interactive Differential Diagnosis explorer using a tab-like system to compare conditions. 4. A Visual Comparison Chart to synthesize the analysis. 5. A clear Final Conclusion. This structure transforms a static report into an active learning tool, allowing users to explore the "why" behind the diagnosis by comparing options, which is more effective than linear reading. -->
    <!-- Visualization & Content Choices: Case Info -> Goal: Inform -> Method: Key-value cards -> Interaction: Static -> Justification: Quick, clear context. Lab Data -> Goal: Highlight -> Method: Grid with color-coded abnormal values -> Interaction: Static -> Justification: Draws attention to critical data. Differential Diagnoses -> Goal: Compare/Educate -> Method: Tab system with HTML/CSS cell visuals -> Interaction: Click to switch -> Justification: Facilitates focused learning with visual aids. Overall Analysis -> Goal: Synthesize -> Method: Interactive Bar Chart -> Interaction: Click to navigate -> Justification: Provides a high-level summary and links to details. All choices avoid SVG/Mermaid and support the guided exploratory structure. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .rbc-viz-container {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            background-color: #fee2e2; /* Red-100 for plasma background */
        }
        .rbc {
             border-radius: 50%;
             border: 2px solid #b91c1c; /* Red-700 */
        }
        .nav-button-active {
            background-color: #115e59; /* Teal-800 */
            color: #ffffff;
            font-weight: 600;
        }
        .nav-button-inactive {
            background-color: #f0fdfa; /* Teal-50 */
            color: #134e4a; /* Teal-900 */
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <main class="container mx-auto p-4 sm:p-6 md:p-8 max-w-5xl">

        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-teal-800">Latihan Bahas Kasus</h1>
            <p class="mt-2 text-lg text-stone-600">Menganalisis Kasus Anemia pada Anak</p>
        </header>

        <section id="case-summary" class="mb-12 bg-white p-6 rounded-xl shadow-lg border border-stone-200">
            <h2 class="text-2xl font-semibold text-teal-700 mb-4">Ringkasan Kasus</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold text-stone-700 mb-2">Data Pasien</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center"><span class="w-24 font-medium text-stone-500">Usia</span>: 6 Tahun</li>
                        <li class="flex items-center"><span class="w-24 font-medium text-stone-500">Keluhan</span>: Lemas, mudah lelah, sulit konsentrasi</li>
                        <li class="flex items-center"><span class="w-24 font-medium text-stone-500">Durasi</span>: 1 minggu</li>
                    </ul>
                </div>
                <div class="bg-amber-50 border border-amber-200 p-4 rounded-lg">
                    <h3 class="font-semibold text-amber-800 mb-2">Riwayat Diet</h3>
                    <p class="text-amber-700">Asupan makan sangat sedikit (3-5 sendok per hari) dan tidak suka minum susu, menunjukkan risiko tinggi kekurangan nutrisi.</p>
                </div>
            </div>
        </section>

        <section id="clinical-findings" class="mb-12">
            <h2 class="text-2xl font-semibold text-teal-700 mb-4 text-center">Temuan Klinis & Laboratorium</h2>
             <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg border border-stone-200">
                    <h3 class="text-xl font-semibold text-stone-800 mb-4">Pemeriksaan Fisik</h3>
                    <ul class="space-y-3">
                        <li><strong class="text-teal-700">Konjungtiva Anemis:</strong> Pucat, menandakan kurangnya hemoglobin.</li>
                        <li><strong class="text-teal-700">Atrofi Papil Lidah:</strong> Lidah tampak licin, tanda klasik defisiensi besi.</li>
                        <li><strong class="text-teal-700">Koilonikia (Spoon Nails):</strong> Kuku rapuh dan cekung, sangat spesifik untuk defisiensi besi.</li>
                        <li><strong class="text-teal-700">Sudut Bibir Pecah:</strong> Tanda kekurangan nutrisi seperti zat besi.</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-stone-200">
                     <h3 class="text-xl font-semibold text-stone-800 mb-4">Hasil Darah Lengkap</h3>
                    <ul class="space-y-2 text-sm">
                        <li class="flex justify-between p-2 rounded bg-red-50 border-l-4 border-red-400"><span><strong>Hb:</strong> 8 g/dL</span> <span class="font-bold">Rendah</span></li>
                        <li class="flex justify-between p-2 rounded bg-green-50"><span><strong>Leukosit:</strong> 8200/µL</span> <span>Normal</span></li>
                        <li class="flex justify-between p-2 rounded bg-green-50"><span><strong>Trombosit:</strong> 279000/µL</span> <span>Normal</span></li>
                        <li class="flex justify-between p-2 rounded bg-red-50 border-l-4 border-red-400"><span><strong>MCV:</strong> 65 fL</span> <span class="font-bold">Rendah</span></li>
                        <li class="flex justify-between p-2 rounded bg-red-50 border-l-4 border-red-400"><span><strong>MCH:</strong> 20 pg</span> <span class="font-bold">Rendah</span></li>
                         <li class="flex justify-between p-2 rounded bg-red-50 border-l-4 border-red-400"><span><strong>MCHC:</strong> 21 g/dL</span> <span class="font-bold">Rendah</span></li>
                    </ul>
                </div>
             </div>
        </section>

        <section id="differential-diagnosis" class="mb-12">
            <h2 class="text-2xl font-semibold text-teal-700 mb-2 text-center">Jelajahi Diagnosis Banding</h2>
            <p class="text-center text-stone-600 mb-6">Setiap jenis anemia memiliki ciri sel darah merah yang berbeda. Klik untuk membandingkan.</p>
            
            <nav id="diagnosis-nav" class="flex flex-wrap justify-center gap-2 mb-8"></nav>
            <div id="diagnosis-details"></div>
        </section>
        
        <section id="comparison-chart" class="mb-12 bg-white p-6 rounded-xl shadow-lg border border-stone-200">
            <h2 class="text-2xl font-semibold text-teal-700 mb-1 text-center">Perbandingan Diagnosis</h2>
            <p class="text-center text-sm text-stone-500 mb-6">Visualisasi tingkat kecocokan berdasarkan analisis klinis dan lab. Klik bar untuk detail.</p>
            <div class="chart-container">
                <canvas id="matchChart"></canvas>
            </div>
        </section>

        <section id="conclusion" class="bg-teal-50 border-2 border-teal-500 rounded-xl p-6 shadow-lg">
            <h2 class="text-2xl font-bold text-teal-800 mb-4">Kesimpulan Diagnosis</h2>
            <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="rbc-viz-container">
                    <div class="rbc" style="width: 35px; height: 35px; background-color: #fecaca;"></div>
                </div>
                <div class="flex-1">
                    <p class="text-3xl font-bold text-teal-900">Anemia Defisiensi Besi</p>
                    <p class="mt-2 text-teal-700">Diagnosis ini paling mungkin karena kombinasi kuat antara gambaran **anemia mikrositik hipokromik** (MCV, MCH, MCHC rendah) dengan tanda klinis spesifik seperti **koilonikia** dan **atrofi papil lidah**.</p>
                </div>
            </div>
        </section>

    </main>

    <script>
        const diagnoses = [
            {
                id: 'fe_deficiency',
                name: 'Defisiensi Besi',
                matchScore: 10,
                rbcHtml: `<div class="rbc" style="width: 35px; height: 35px; background-color: #fecaca; /* Red-200 pale color */"></div>`,
                description: 'Anemia Mikrositik Hipokromik. Sel darah merah kecil dan pucat karena kurangnya zat besi untuk membentuk hemoglobin.',
                analysis: 'SANGAT SESUAI. Temuan lab (MCV, MCH, MCHC rendah) dan tanda klinis spesifik (koilonikia, atrofi papil lidah) sangat khas untuk kondisi ini.'
            },
            {
                id: 'folate_deficiency',
                name: 'Defisiensi Asam Folat',
                matchScore: 1,
                rbcHtml: `<div class="rbc" style="width: 65px; height: 65px; background-color: #ef4444; /* Red-500 normal color */"></div>`,
                description: 'Anemia Makrositik. Sel darah merah besar karena gangguan sintesis DNA.',
                analysis: 'TIDAK SESUAI. Menyebabkan MCV tinggi (makrositik), berlawanan dengan hasil lab pasien yang menunjukkan MCV rendah (mikrositik).'
            },
            {
                id: 'b12_deficiency',
                name: 'Defisiensi Vit. B12',
                matchScore: 1,
                rbcHtml: `<div class="rbc" style="width: 65px; height: 65px; background-color: #ef4444; /* Red-500 normal color */"></div>`,
                description: 'Anemia Makrositik. Mirip dengan defisiensi folat, sel darah merah menjadi besar.',
                analysis: 'TIDAK SESUAI. Menyebabkan MCV tinggi (makrositik), sedangkan hasil lab pasien menunjukkan MCV rendah.'
            },
            {
                id: 'chronic_disease',
                name: 'Penyakit Kronik',
                matchScore: 3,
                rbcHtml: `<div class="rbc" style="width: 50px; height: 50px; background-color: #ef4444; /* Red-500 normal color */"></div>`,
                description: 'Anemia Normositik Normokromik. Ukuran dan warna sel darah merah biasanya normal.',
                analysis: 'KURANG SESUAI. Umumnya menunjukkan MCV normal. Meskipun bisa menjadi mikrositik, tanda klinis spesifik seperti koilonikia tidak khas.'
            }
        ];

        const navContainer = document.getElementById('diagnosis-nav');
        const detailsContainer = document.getElementById('diagnosis-details');
        let chart = null;

        function renderDetails(diagnosisId) {
            const diagnosis = diagnoses.find(d => d.id === diagnosisId);
            if (!diagnosis) return;

            detailsContainer.innerHTML = `
                <div class="bg-white p-6 rounded-xl shadow-lg border border-stone-200 transition-all duration-300 ease-in-out">
                    <div class="flex flex-col md:flex-row items-center gap-6">
                        <div class="rbc-viz-container">${diagnosis.rbcHtml}</div>
                        <div class="flex-1 text-center md:text-left">
                            <h3 class="text-xl font-bold text-teal-800">${diagnosis.name}</h3>
                            <p class="text-stone-600 mt-1">${diagnosis.description}</p>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-stone-200">
                        <h4 class="font-semibold text-stone-700">Analisis Kecocokan dengan Kasus:</h4>
                        <p class="text-stone-600 mt-1">${diagnosis.analysis}</p>
                    </div>
                </div>
            `;
            
            document.querySelectorAll('#diagnosis-nav button').forEach(btn => {
                btn.classList.toggle('nav-button-active', btn.dataset.id === diagnosisId);
                btn.classList.toggle('nav-button-inactive', btn.dataset.id !== diagnosisId);
            });
        }

        function createNav() {
            diagnoses.forEach(diagnosis => {
                const button = document.createElement('button');
                button.textContent = diagnosis.name;
                button.dataset.id = diagnosis.id;
                button.className = 'px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 nav-button-inactive';
                button.onclick = () => renderDetails(diagnosis.id);
                navContainer.appendChild(button);
            });
        }

        function createChart() {
            const ctx = document.getElementById('matchChart').getContext('2d');
            const data = {
                labels: diagnoses.map(d => d.name),
                datasets: [{
                    label: 'Tingkat Kecocokan',
                    data: diagnoses.map(d => d.matchScore),
                    backgroundColor: diagnoses.map(d => d.id === 'fe_deficiency' ? '#115e59' : '#99f6e4'),
                    borderColor: diagnoses.map(d => d.id === 'fe_deficiency' ? '#134e4a' : '#5eead4'),
                    borderWidth: 1,
                    borderRadius: 4
                }]
            };

            chart = new Chart(ctx, {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: { beginAtZero: true, max: 10, title: { display: true, text: 'Skor Kecocokan Klinis (0-10)' } }
                    },
                    plugins: { legend: { display: false } },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const diagnosisId = diagnoses[elements[0].index].id;
                            renderDetails(diagnosisId);
                            document.getElementById('differential-diagnosis').scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }
                }
            });
        }

        window.onload = () => {
            createNav();
            renderDetails('fe_deficiency');
            createChart();
        };
    </script>

</body>
</html>
